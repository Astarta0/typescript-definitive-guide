{"expireTime":9007200833493979000,"key":"transformer-remark-markdown-html-ast-8d642e7184f7848e01ef0d319ed4f0f8-gatsby-remark-collect-info-for-block-code-before-prismjsgatsby-remark-prismjsgatsby-remark-decorate-block-codegatsby-remark-add-heading-link-","val":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{},"children":[{"type":"raw","value":"\n    <button class=\"content__button_copy-to-buffer\" path=\"uluchshena-podderjka-dlya-tipa-never-vozvrashchaemogo-iz-funkcii\">\n      <svg class=\"svg-icon copy-to-buffer-button__svg-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <use xlink:href=\"#iconmonstr-link\"></use>\n      </svg>\n      <div class=\"content__tooltip_copy-to-buffer tooltip\">\n        Скопировать ссылку в буффер обмена\n      </div>\n    </button>\n  "},{"type":"element","tagName":"span","properties":{},"children":[{"type":"text","value":"Улучшена поддержка для типа never возвращаемого из функций"}]}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":61,"offset":60}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Основное предназначение типа ","position":{"start":{"line":3,"column":1,"offset":62},"end":{"line":3,"column":30,"offset":91}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"never"}],"position":{"start":{"line":3,"column":30,"offset":91},"end":{"line":3,"column":37,"offset":98}}},{"type":"text","value":" явным образом указывать что из вызываемой функции возврата никогда не произойдет. Как известно подобный сценарий может призойти по причине бесконечного цекла или выброса исключения.","position":{"start":{"line":3,"column":37,"offset":98},"end":{"line":3,"column":219,"offset":280}}}],"position":{"start":{"line":3,"column":1,"offset":62},"end":{"line":3,"column":219,"offset":280}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"До ","position":{"start":{"line":5,"column":1,"offset":282},"end":{"line":5,"column":4,"offset":285}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"TypeScript","position":{"start":{"line":5,"column":5,"offset":286},"end":{"line":5,"column":15,"offset":296}}}],"position":{"start":{"line":5,"column":4,"offset":285},"end":{"line":5,"column":16,"offset":297}}},{"type":"text","value":" ","position":{"start":{"line":5,"column":16,"offset":297},"end":{"line":5,"column":17,"offset":298}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v3.7"}],"position":{"start":{"line":5,"column":17,"offset":298},"end":{"line":5,"column":23,"offset":304}}},{"type":"text","value":", в случаях когда одна функция имеющая декларацию возвращаемого типа отличного от ","position":{"start":{"line":5,"column":23,"offset":304},"end":{"line":5,"column":105,"offset":386}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"void"}],"position":{"start":{"line":5,"column":105,"offset":386},"end":{"line":5,"column":111,"offset":392}}},{"type":"text","value":" прерывала нормальное выполнение программы за счет вызова функции с возвращающим типом ","position":{"start":{"line":5,"column":111,"offset":392},"end":{"line":5,"column":198,"offset":479}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"never"}],"position":{"start":{"line":5,"column":198,"offset":479},"end":{"line":5,"column":205,"offset":486}}},{"type":"text","value":", выводу типов требовалось либо явного указания возврата с помощью оператора ","position":{"start":{"line":5,"column":205,"offset":486},"end":{"line":5,"column":282,"offset":563}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"return"}],"position":{"start":{"line":5,"column":282,"offset":563},"end":{"line":5,"column":290,"offset":571}}},{"type":"text","value":", либо применения инструкции ","position":{"start":{"line":5,"column":290,"offset":571},"end":{"line":5,"column":319,"offset":600}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"throw"}],"position":{"start":{"line":5,"column":319,"offset":600},"end":{"line":5,"column":326,"offset":607}}},{"type":"text","value":".","position":{"start":{"line":5,"column":326,"offset":607},"end":{"line":5,"column":327,"offset":608}}}],"position":{"start":{"line":5,"column":1,"offset":282},"end":{"line":5,"column":327,"offset":608}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"content__code\">\n    <div class=\"content__code-panel_top content__code-panel_lang_ts\">\n        <span class=\"content_code-label_filepath\"></span>\n        <span class=\"content_code-label_lang\">ts</span>\n    </div>\n    <div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// [TypeScript &lt; v3.7]</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">critical</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">message<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">never</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Несмотря что в случае вызова функции critical\n * возврата из функции validate не произойдет,\n * из-за непонимания этого вывод типов считает\n * что для функции validate забыли указать\n * возвращаемое значение.\n * \n * (!) [ошибка в аннотации возвращаемого типа]\n * Function lacks ending return statement and\n * return type does not include 'undefined'.\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">validate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User <span class=\"token comment\">/**Error (!) */</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data <span class=\"token operator\">&amp;&amp;</span> data<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">critical</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Field \"user\" not found in object \"data.\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Для устронения ошибки требуется явно\n * указать возвращаемое значение...\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">validate_a</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User <span class=\"token comment\">/**Error (!) */</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data <span class=\"token operator\">&amp;&amp;</span> data<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">critical</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Field \"user\" not found in object \"data.\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/**\n * ...либо выбросить исключение.\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">validate_b</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User <span class=\"token comment\">/**Error (!) */</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data <span class=\"token operator\">&amp;&amp;</span> data<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">throw</span> <span class=\"token function\">critical</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Field \"user\" not found in object \"data.\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n    <div class=\"content__code-panel_bottom content__code-panel_lang_ts\"></div>\n</div>","position":{"start":{"line":7,"column":1,"offset":610},"end":{"line":58,"column":4,"offset":1788}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Начиная с версии ","position":{"start":{"line":60,"column":1,"offset":1790},"end":{"line":60,"column":18,"offset":1807}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v3.7"}],"position":{"start":{"line":60,"column":18,"offset":1807},"end":{"line":60,"column":24,"offset":1813}}},{"type":"text","value":" вывод типов научился распознавать прерывание нормального хода программы без явного указания ","position":{"start":{"line":60,"column":24,"offset":1813},"end":{"line":60,"column":117,"offset":1906}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"return"}],"position":{"start":{"line":60,"column":117,"offset":1906},"end":{"line":60,"column":125,"offset":1914}}},{"type":"text","value":" или ","position":{"start":{"line":60,"column":125,"offset":1914},"end":{"line":60,"column":130,"offset":1919}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"throw"}],"position":{"start":{"line":60,"column":130,"offset":1919},"end":{"line":60,"column":137,"offset":1926}}},{"type":"text","value":".","position":{"start":{"line":60,"column":137,"offset":1926},"end":{"line":60,"column":138,"offset":1927}}}],"position":{"start":{"line":60,"column":1,"offset":1790},"end":{"line":60,"column":138,"offset":1927}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"content__code\">\n    <div class=\"content__code-panel_top content__code-panel_lang_ts\">\n        <span class=\"content_code-label_filepath\"></span>\n        <span class=\"content_code-label_lang\">ts</span>\n    </div>\n    <div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// [TypeScript >= v3.7]</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">critical</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">message<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">never</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Явного указания return или throw\n * больше не требуется.\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">validate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> User <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data <span class=\"token operator\">&amp;&amp;</span> data<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">critical</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Field \"user\" not found in object \"data.\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n    <div class=\"content__code-panel_bottom content__code-panel_lang_ts\"></div>\n</div>","position":{"start":{"line":62,"column":1,"offset":1929},"end":{"line":84,"column":4,"offset":2305}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":85,"column":1,"offset":2306}}}}