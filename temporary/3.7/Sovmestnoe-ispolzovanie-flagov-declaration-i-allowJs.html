<p>До текущей версии <em>TypeScript</em> акивный флаг компилятора <code class="inline-code">--declaration</code> позволял генерировать файлы декларации <code class="inline-code">.d.ts</code> только из файлов имеющих расширение <code class="inline-code">.ts</code> и <code class="inline-code">.tsx</code>. Файлы декларации существуенно снижают нагрузку возложенную на компилятор, что является важным критерием для такого механизма как ссылки на проект, который существенно ускоряет процесс сборки больших приложений.</p>
<p>Но к сожалению флаг <code class="inline-code">--declaration</code> не совместим с другим таким важным флагом как <code class="inline-code">--allowJs</code>, который позволяет использовать в впроекте модули с расширением <code class="inline-code">.js</code> код в которых не поддается декларированию даже если объявления аннотированны с помощью <em>JSDoc</em>.</p>
<p>Начиная с <em>TypeScript</em> <code class="inline-code">v3.7</code> это проблема устранена и теперь компилятор из-за всех сил будет пытаться описать структуру <code class="inline-code">JavaScript</code> кода с помощью типов, к тому же прибегая к помощи оставленной разработчиками при помощи <em>JSDoc</em>.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// [File: module.js]</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> VALUE = <span class="hljs-number">5</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> SUM = <span class="hljs-number">5</span> + <span class="hljs-number">5</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> toString = <span class="hljs-function"><span class="hljs-params">value</span> =></span> value.toString();</code></pre>
<pre><code class="hljs language-ts"><span class="hljs-comment">// [File: module.d.ts]</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> VALUE: <span class="hljs-number">5</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> SUM: <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toString</span>(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">any</span></span>;</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">// [File: module.js]</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> VALUE = <span class="hljs-number">5</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> SUM = <span class="hljs-number">5</span> + <span class="hljs-number">5</span>;
<span class="hljs-comment">/**
 * 
 * @param {string} value 
 * @returns {string}
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> toString = <span class="hljs-function"><span class="hljs-params">value</span> =></span> value.toString();</code></pre>
<pre><code class="hljs language-ts"><span class="hljs-comment">// [File: module.d.ts]</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> VALUE: <span class="hljs-number">5</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> SUM: <span class="hljs-built_in">number</span>;
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toString</span>(<span class="hljs-params">value: <span class="hljs-built_in">any</span></span>): <span class="hljs-title">string</span></span>;</code></pre>
